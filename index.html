<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <title>BarGen - Barcode Generator</title>
    <link rel="stylesheet" href="css/main.css">
</head>
<body>
<div class="container">
<div class="card">
    <div class="app-header">
        <img src="assets/logo.png" alt="Logo" class="app-logo">
        <h1>BarGen</h1>
    </div>

    <div class="tabs">
        <button class="tab-btn active" data-tab="datamatrix">DataMatrix</button>
        <button class="tab-btn" data-tab="library">–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞</button>
        <button class="tab-btn" data-tab="barcode">–í–µ—Å–æ–≤—ã–µ</button>
        <button class="tab-btn" data-tab="simplegen">–ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä</button>
        <button class="tab-btn" data-tab="weightcarousel">–ö–∞—Ä—É—Å–µ–ª—å</button>
        <button class="tab-btn" data-tab="gs1pack">–§–∞—Å–æ–≤–∫–∞ GS1</button>
    </div>

    <!-- DataMatrix Tab -->
    <div id="tab-datamatrix" class="tab-content active">
        <div id="mode-indicator"><span class="mode-badge default" id="mode-badge">–î–µ–º–æ</span></div>
        
        <!-- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–≤–æ–π–Ω–æ–≥–æ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è -->
        <div class="double-scan-settings" style="margin-bottom:15px">
            <label style="font-weight:700;margin-bottom:10px;display:block">–î–≤–æ–π–Ω–æ–µ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ:</label>
            <div class="double-scan-options">
                <label class="custom-checkbox-label">
                    <input type="checkbox" id="doubleScanSameDM">
                    <span class="custom-checkbox-checkmark"></span>
                    <span class="custom-checkbox-text">–û–¥–∏–Ω–∞–∫–æ–≤—ã–π –°–ò + –û–¥–∏–Ω–∞–∫–æ–≤—ã–π –°–ò</span>
                </label>
                <label class="custom-checkbox-label">
                    <input type="checkbox" id="doubleScanDmEan">
                    <span class="custom-checkbox-checkmark"></span>
                    <span class="custom-checkbox-text">–°–ò + –®–ö</span>
                </label>
                <label class="custom-checkbox-label">
                    <input type="checkbox" id="doubleScanSameEan">
                    <span class="custom-checkbox-checkmark"></span>
                    <span class="custom-checkbox-text">–®–ö + –®–ö</span>
                </label>
                <label class="custom-checkbox-label">
                    <input type="checkbox" id="doubleScanDifferentDM">
                    <span class="custom-checkbox-checkmark"></span>
                    <span class="custom-checkbox-text">–†–∞–∑–Ω—ã–µ –°–ò1 + –°–ò2</span>
                </label>
            </div>
        </div>
        
        <div id="code-container">
            <div id="primary-code-container">
                <div id="datamatrix-container"></div>
            </div>
            <div id="secondary-code-container" style="display:none;margin-top:20px">
                <div id="datamatrix-container-2"></div>
                <svg id="ean13-barcode" style="display:none"></svg>
            </div>
        </div>
        <div class="dm-carousel-nav" id="dm-nav-arrows" style="display:none">
            <button id="dm-prev-btn" class="dm-arrow-btn">‚ùÆ</button>
            <button id="dm-next-btn" class="dm-arrow-btn">‚ùØ</button>
        </div>
        <div class="code-info" id="code-info" style="display:none">
            <div><span class="label">GTIN:</span> <span class="value" id="info-barcode">-</span></div>
            <div><span class="label">–®–∞–±–ª–æ–Ω:</span> <span class="value" id="info-template">-</span></div>
            <div class="counter" id="info-counter">1/1</div>
        </div>
        <div class="code-display-section">
            <div class="code-display-item">
                <div class="code-label">–û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–¥:</div>
                <div id="current-code" class="code-value">-</div>
            </div>
            <div class="code-display-item" id="secondary-code-display" style="display:none">
                <div class="code-label">–í—Ç–æ—Ä–∏—á–Ω—ã–π –∫–æ–¥:</div>
                <div id="secondary-code-text" class="code-value">-</div>
            </div>
        </div>
        <div class="dm-carousel-controls">
            <div class="interval-selector">
                <button class="interval-btn" data-interval="0.5">0.5</button>
                <button class="interval-btn active" data-interval="0.7">0.7</button>
                <button class="interval-btn" data-interval="1">1</button>
                <button class="interval-btn" data-interval="2">2</button>
                <input type="number" id="dm-custom-interval" class="custom-interval-input" step="0.1" min="0.1" value="0.7">
            </div>
            <div id="timer" style="text-align:center;margin:10px 0"><span class="pulse" id="countdown">–ó–∞–≥—Ä—É–∑–∫–∞...</span></div>
            <div class="dm-play-controls">
                <button class="btn btn-warning btn-sm" id="dm-pause-btn">–°—Ç–æ–ø</button>
                <button class="btn btn-success btn-sm" id="dm-play-btn" style="display:none">–°—Ç–∞—Ä—Ç</button>
                <button class="btn btn-primary btn-sm" id="refresh-btn">–û–±–Ω–æ–≤–∏—Ç—å</button>
            </div>
        </div>
    </div>

    <!-- Library Tab -->
    <div id="tab-library" class="tab-content">
        <div class="folders-section">
            <h4>–ü–∞–ø–∫–∏ (DataMatrix)</h4>
            <div class="folder-list" id="dmFolderList"></div>
            <div style="display:flex;gap:8px;justify-content:center;margin-top:10px">
                <button class="btn btn-primary btn-sm" id="dm-run-folder">–ó–∞–ø—É—Å–∫</button>
                <button class="btn btn-warning btn-sm" id="dm-rename-folder">‚úé</button>
                <button class="btn btn-danger btn-sm" id="dm-delete-folder">√ó</button>
            </div>
        </div>
        <div class="add-form">
            <label>–î–æ–±–∞–≤–∏—Ç—å GTIN:</label>
            <textarea id="barcode-input" placeholder="–ë–∞—Ä–∫–æ–¥—ã (–∫–∞–∂–¥—ã–π —Å –Ω–æ–≤–æ–π —Å—Ç—Ä–æ–∫–∏)"></textarea>
            <div class="hint">EAN-13 ‚Üí DataMatrix –ø–æ —à–∞–±–ª–æ–Ω—É</div>
            <div class="form-group" style="margin-top:10px">
                <label>–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ –ø–∞–ø–∫—É:</label>
                <div class="input-group">
                    <select id="dmFolderSelect" style="flex:1"></select>
                    <input type="text" id="dmFolderInput" class="d-none" style="flex:1" placeholder="–ò–º—è –Ω–æ–≤–æ–π –ø–∞–ø–∫–∏">
                    <button class="btn btn-purple btn-sm" id="dmFolderModeBtn" style="min-width:50px;font-size:1.4em;padding:0">Ôºã</button>
                </div>
            </div>
            <div class="template-selector">
                <label>–®–∞–±–ª–æ–Ω:</label>
                <div class="template-btns">
                    <div class="tmpl-btn active" data-template="type1"><span class="tmpl-name">–¢–∏–ø 1</span></div>
                    <div class="tmpl-btn" data-template="type2"><span class="tmpl-name">–¢–∏–ø 2</span></div>
                </div>
            </div>
            <div class="form-row">
                <button class="btn btn-success btn-sm" id="add-btn">–î–æ–±–∞–≤–∏—Ç—å</button>
                <button class="btn btn-secondary btn-sm" id="clear-input-btn">–û—á–∏—Å—Ç–∏—Ç—å</button>
            </div>
        </div>
        <div class="bulk-actions">
            <span style="flex:1;font-size:.8em;color:var(--text-light)">–í –ø–∞–ø–∫–µ: <strong id="dm-items-count">0</strong> <span id="dm-current-folder-name"></span></span>
            <button class="btn btn-outline btn-sm" id="select-all-btn">–í—Å–µ</button>
            <button class="btn btn-outline btn-sm" id="deselect-all-btn">–°–Ω—è—Ç—å</button>
            <button class="btn btn-danger btn-sm" id="clear-all-btn">√ó</button>
        </div>
        <div id="dmItemsList" class="weight-items-list"></div>
        <div class="rotation-controls" id="rotation-controls">
            <div id="rotation-status">–°–æ–∑–¥–∞–π—Ç–µ –ø–∞–ø–∫—É</div>
            <div style="margin-top:10px;display:flex;justify-content:center;gap:10px">
                <button class="btn btn-success btn-sm" id="start-btn">–ó–∞–ø—É—Å—Ç–∏—Ç—å</button>
                <button class="btn btn-warning btn-sm" id="stop-btn" style="display:none">–°—Ç–æ–ø</button>
            </div>
        </div>
        <div class="backup-section">
            <div class="backup-title">–†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ</div>
            <div class="backup-actions">
                <button class="btn btn-primary btn-sm" id="exportDataBtn">–°–∫–∞—á–∞—Ç—å</button>
                <button class="btn btn-dark btn-sm" id="importDataBtn">–ó–∞–≥—Ä—É–∑–∏—Ç—å</button>
                <input type="file" id="importFile" accept=".json" style="display:none">
            </div>
        </div>
        <div class="history-panel">
            <h4><span>–ò—Å—Ç–æ—Ä–∏—è (50)</span><button class="btn btn-outline btn-sm" id="clearHistoryBtn" style="padding:4px 8px;font-size:.7em">–û—á–∏—Å—Ç–∏—Ç—å</button></h4>
            <div class="history-list" id="historyList"></div>
        </div>
    </div>

    <!-- Barcode Tab -->
    <div id="tab-barcode" class="tab-content">
        <div class="barcode-form">
            <div class="form-group">
                <label>–¢–∏–ø —à—Ç—Ä–∏—Ö–∫–æ–¥–∞</label>
                <select id="barcodeType">
                    <option value="code128_19_piece">47-Code128: —à—Ç—É—á–Ω—ã–π (19)</option>
                    <option value="code128_19_weight">49-Code128: –≤–µ—Å–æ–≤–æ–π (19)</option>
                    <option value="code128_19_price">44-Code128: —Å —Ü–µ–Ω–æ–π (19)</option>
                    <option value="code128_16_cas">77-Code128: CAS (16)</option>
                    <option value="ean13_weight">22-EAN-13: –≤–µ—Å–æ–≤–æ–π (13)</option>
                </select>
            </div>
            <div id="barcodeParams"></div>
            <label class="checkbox-row"><input type="checkbox" id="simulateError"><span>–°–∏–º—É–ª—è—Ü–∏—è –æ—à–∏–±–∫–∏ CRC</span></label>
            <div class="controls"><button class="btn btn-primary" id="generateBarcodeBtn">–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å</button></div>
        </div>
        <div class="barcode-result" id="barcodeResult" style="display:none">
            <div class="result-text" id="barcodeText">-</div>
            <svg id="barcodeSvg"></svg>
        </div>
    </div>

    <!-- Simple Generator Tab -->
    <div id="tab-simplegen" class="tab-content">
        <div id="sg-view-list">
            <div class="simple-gen-form">
                <div class="form-group">
                    <label>–¢–∏–ø</label>
                    <select id="sgType">
                        <option value="CODE128">Code 128</option>
                        <option value="EAN13">EAN-13</option>
                        <option value="UPC">UPC</option>
                        <option value="ITF14">ITF-14</option>
                    </select>
                </div>
                <div class="form-group"><input type="text" id="sgValue" placeholder="–ó–Ω–∞—á–µ–Ω–∏–µ" autocomplete="off"></div>
                <div class="simple-preview"><span style="color:#999;font-size:.8em;position:absolute;top:5px;left:10px">–ü—Ä–µ–≤—å—é</span><svg id="sgSvg" style="display:none"></svg></div>
                <div class="sg-save-panel">
                    <label style="font-weight:700">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ –ø–∞–ø–∫—É</label>
                    <div class="form-group" style="margin-top:10px">
                        <div class="input-group">
                            <select id="sgFolderSelect" style="flex:1"></select>
                            <input type="text" id="sgFolderInput" class="d-none" style="flex:1" placeholder="–ò–º—è –Ω–æ–≤–æ–π –ø–∞–ø–∫–∏">
                            <button class="btn btn-purple btn-sm" id="sgFolderModeBtn" style="min-width:50px;font-size:1.4em;padding:0">Ôºã</button>
                        </div>
                    </div>
                    <div class="form-group"><input type="text" id="sgName" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ"></div>
                    <button class="btn btn-success" style="width:100%" id="sgAddBtn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                </div>
            </div>
            <div class="folders-section">
                <h4>–ú–æ–∏ –ø–∞–ø–∫–∏</h4>
                <div id="sgFoldersList"></div>
            </div>
        </div>
        <div id="sg-view-carousel" style="display:none">
            <div class="sg-back-btn" id="sgBackBtn">‚Üê –ù–∞–∑–∞–¥</div>
            <h3 id="sgActiveFolderName" style="text-align:center;margin:0 0 15px;color:var(--text-light)">–ü–∞–ø–∫–∞</h3>
            <div class="sg-carousel">
                <div class="sg-display-area">
                    <div class="sg-header-row">
                        <span class="sg-item-name" id="sgCarouselName">-</span>
                        <button class="sg-edit-name-btn" id="sgEditNameBtn" title="–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞–∑–≤–∞–Ω–∏–µ">‚úé</button>
                        <button class="sg-edit-name-btn" id="sgEditCodeBtn" title="–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥">123</button>
                    </div>
                    <svg id="sgCarouselSvg"></svg>
                    <div class="sg-item-counter" id="sgCarouselCounter">0/0</div>
                </div>
                <div class="sg-carousel-nav">
                    <div class="sg-arrow-btn" id="sgPrevBtn">‚ùÆ</div>
                    <div class="sg-arrow-btn" id="sgNextBtn">‚ùØ</div>
                </div>
            </div>
            <div style="margin-top:20px;display:flex;justify-content:center;gap:10px">
                <button class="btn btn-warning btn-sm" id="sgRenameFolderBtn">–ü–µ—Ä–µ–∏–º.</button>
                <button class="btn btn-danger btn-sm" id="sgDeleteFolderBtn">–£–¥. –ø–∞–ø–∫—É</button>
            </div>
            <div style="text-align:center;margin-top:10px"><button class="btn btn-danger btn-sm" id="sgDeleteItemBtn">–£–¥–∞–ª–∏—Ç—å</button></div>
        </div>
    </div>

    <!-- Weight Carousel Tab -->
    <div id="tab-weightcarousel" class="tab-content">
        <div class="folders-section">
            <h4>–ü–∞–ø–∫–∏ (–í–µ—Å–æ–≤—ã–µ)</h4>
            <div class="folder-list" id="wcFolderList"></div>
            <div style="display:flex;gap:8px;justify-content:center;margin-top:10px">
                <button class="btn btn-primary btn-sm" id="wc-run-folder">–ó–∞–ø—É—Å–∫</button>
                <button class="btn btn-warning btn-sm" id="wc-rename-folder">‚úé</button>
                <button class="btn btn-danger btn-sm" id="wc-delete-folder">√ó</button>
            </div>
        </div>
        <div class="weight-carousel-form">
            <div class="form-group"><label>–ù–∞–∑–≤–∞–Ω–∏–µ –ø–∞–ø–∫–∏</label><input type="text" id="wcFolderName" placeholder="–°—ã—Ä—ã, –ö–æ–ª–±–∞—Å—ã..."></div>
            <label style="font-size:.85em;font-weight:600">–ü—Ä–µ—Ñ–∏–∫—Å—ã:</label>
            <div class="prefix-checkboxes">
                <label class="prefix-checkbox"><input type="checkbox" id="wcPrefix77" checked><span>77 CAS</span></label>
                <label class="prefix-checkbox"><input type="checkbox" id="wcPrefix22"><span>22 EAN</span></label>
                <label class="prefix-checkbox"><input type="checkbox" id="wcPrefix49"><span>49 C128</span></label>
            </div>
            <div class="form-group"><label>PLU –∫–æ–¥—ã</label><textarea id="wcProductCode" placeholder="1234" style="height:70px"></textarea></div>
            <div id="group-discount-section" class="discount-section d-none">
                <label style="font-weight:700">–°–∫–∏–¥–∫–∞ (49)</label>
                <div class="weight-mode-switch" style="margin-top:8px">
                    <input type="radio" name="discountMode" id="discFixed" value="fixed" checked><label class="weight-mode-label" for="discFixed">–§–∏–∫—Å.</label>
                    <input type="radio" name="discountMode" id="discRandom" value="random"><label class="weight-mode-label" for="discRandom">Rand</label>
                </div>
                <div id="disc-fixed-group"><input type="number" id="wcDiscount" value="0" min="0" max="99"><div class="hint">%</div></div>
                <div id="disc-random-group" class="d-none"><div class="weight-range-row"><input type="number" id="wcDiscMin" value="5"><span>‚Äî</span><input type="number" id="wcDiscMax" value="30"></div></div>
            </div>
            <hr class="weight-divider">
            <label style="font-weight:700">–í–µ—Å:</label>
            <div class="weight-mode-switch">
                <input type="radio" name="weightMode" id="weightRandom" value="random" checked><label class="weight-mode-label" for="weightRandom">Random</label>
                <input type="radio" name="weightMode" id="weightFixed" value="fixed"><label class="weight-mode-label" for="weightFixed">–§–∏–∫—Å.</label>
            </div>
            <div class="form-group" id="group-random-weight"><label>–î–∏–∞–ø–∞–∑–æ–Ω (–≥)</label><div class="weight-range-row"><input type="number" id="wcWeightMin" value="150"><span>‚Äî</span><input type="number" id="wcWeightMax" value="8000"></div></div>
            <div class="form-group d-none" id="group-fixed-weight"><label>–§–∏–∫—Å. –≤–µ—Å (–≥)</label><input type="number" id="wcFixedWeight" value="500"></div>
            <div class="form-group"><label id="wcVariationsLabel">–í–∞—Ä–∏–∞—Ü–∏–π</label><input type="number" id="wcVariations" value="10" min="1" max="100"><div class="hint" id="wcVariationsHint">–í–µ—Å–æ–≤ –Ω–∞ PLU</div></div>
            <div class="controls"><button class="btn btn-purple" id="wcAddToCarousel">–î–æ–±–∞–≤–∏—Ç—å</button></div>
        </div>
        <div class="bulk-actions">
            <span style="flex:1;font-size:.8em;color:var(--text-light)">–í –ø–∞–ø–∫–µ: <strong id="wc-items-count">0</strong> <span id="wc-current-folder-name"></span></span>
            <button class="btn btn-outline btn-sm" id="wc-select-all">–í—Å–µ</button>
            <button class="btn btn-outline btn-sm" id="wc-deselect-all">–°–Ω—è—Ç—å</button>
            <button class="btn btn-danger btn-sm" id="wc-clear-selected">√ó</button>
        </div>
        <div class="weight-items-list" id="wcItemsList"></div>
        <div class="rotation-controls" id="wc-rotation-controls">
            <div id="wc-rotation-status">–°–æ–∑–¥–∞–π—Ç–µ –ø–∞–ø–∫—É</div>
            <div style="margin-top:10px;display:flex;justify-content:center;gap:10px">
                <button class="btn btn-success btn-sm" id="wc-start-btn">–°—Ç–∞—Ä—Ç</button>
                <button class="btn btn-warning btn-sm" id="wc-stop-btn" style="display:none">–°—Ç–æ–ø</button>
            </div>
        </div>
        <div class="barcode-carousel-display" id="wcCarouselDisplay" style="display:none">
            <div id="wcBarcodeInfo">-</div>
            <div id="wcBarcodeText">-</div>
            <div class="barcode-svg-wrapper">
                <svg id="wcBarcodeSvg"></svg>
            </div>
            <div id="wcCarouselCounter">1/1</div>
            <div class="wc-carousel-nav">
                <button class="wc-arrow-btn" id="wcPrevBtn">‚ùÆ</button>
                <button class="wc-arrow-btn" id="wcNextBtn">‚ùØ</button>
            </div>
        </div>
        <div class="interval-selector">
            <button class="wc-interval-btn" data-interval="0.5">0.5</button>
            <button class="wc-interval-btn active" data-interval="0.7">0.7</button>
            <button class="wc-interval-btn" data-interval="1">1</button>
            <button class="wc-interval-btn" data-interval="2">2</button>
            <input type="number" id="wc-custom-interval" class="custom-interval-input" step="0.1" min="0.1" value="0.7">
        </div>
    </div>

    <!-- GS1 Pack Tab -->
    <div id="tab-gs1pack" class="tab-content">
        <div class="folders-section">
            <h4>–ü–∞–ø–∫–∏ (GS1 –§–∞—Å–æ–≤–∫–∞)</h4>
            <div class="folder-list" id="gs1FolderList"></div>
            <div style="display:flex;gap:8px;justify-content:center;margin-top:10px">
                <button class="btn btn-primary btn-sm" id="gs1-run-folder">–ó–∞–ø—É—Å–∫</button>
                <button class="btn btn-warning btn-sm" id="gs1-rename-folder">‚úé</button>
                <button class="btn btn-danger btn-sm" id="gs1-delete-folder">√ó</button>
            </div>
        </div>
        <div class="gs1-form">
            <div class="form-group"><label>–ù–∞–∑–≤–∞–Ω–∏–µ –ø–∞–ø–∫–∏</label><input type="text" id="gs1FolderName" placeholder="–¢–æ–≤–∞—Ä—ã —Å–æ —Å–∫–∏–¥–∫–æ–π..."></div>
            <div class="form-group"><label>GoodsId –∫–æ–¥—ã (–ø–æ –æ–¥–Ω–æ–º—É –Ω–∞ —Å—Ç—Ä–æ–∫—É)</label><textarea id="gs1GoodsIds" placeholder="123&#10;456789&#10;99" style="height:70px"></textarea></div>
            
            <label style="font-weight:700;margin-bottom:15px">–¢–∏–ø —Ç–æ–≤–∞—Ä–∞:</label>
            <div class="weight-mode-switch" style="margin-bottom:20px">
                <input type="radio" name="gs1Type" id="gs1TypePiece" value="piece" checked><label class="weight-mode-label" for="gs1TypePiece">–®—Ç—É—á–Ω—ã–π</label>
                <input type="radio" name="gs1Type" id="gs1TypeWeight" value="weight"><label class="weight-mode-label" for="gs1TypeWeight">–í–µ—Å–æ–≤–æ–π</label>
            </div>

            <!-- –°–µ–∫—Ü–∏—è –¥–ª—è —à—Ç—É—á–Ω–æ–≥–æ —Ç–æ–≤–∞—Ä–∞ -->
            <div id="gs1-piece-section">
                <label style="font-weight:700;margin-bottom:15px">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —à—Ç—É–∫:</label>
                <div class="weight-mode-switch">
                    <input type="radio" name="gs1PieceMode" id="gs1PieceRandom" value="random" checked><label class="weight-mode-label" for="gs1PieceRandom">Random</label>
                    <input type="radio" name="gs1PieceMode" id="gs1PieceFixed" value="fixed"><label class="weight-mode-label" for="gs1PieceFixed">–§–∏–∫—Å.</label>
                </div>

                <div class="form-group" id="gs1-random-quantity">
                    <label>–î–∏–∞–ø–∞–∑–æ–Ω –∫–æ–ª-–≤–∞</label>
                    <div class="weight-range-row">
                        <input type="number" id="gs1QuantityMin" value="1" step="0.01">
                        <span>‚Äî</span>
                        <input type="number" id="gs1QuantityMax" value="100" step="0.01">
                    </div>
                </div>
                <div class="form-group d-none" id="gs1-fixed-quantity">
                    <label>–§–∏–∫—Å. –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ</label>
                    <input type="number" id="gs1FixedQuantity" value="50" step="0.01">
                </div>

                <!-- –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç —Ñ–∞—Å–æ–≤–∫–∏ -->
                <div class="form-group" style="margin-top: 15px;">
                    <label style="display: flex; align-items: center; gap: 5px;">
                        –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç —Ñ–∞—Å–æ–≤–∫–∏ (measureDiv)
                        <span style="cursor: help; color: #999; font-size: 0.9em;" title="–†–∞–∑–º–µ—Ä –æ–¥–Ω–æ–π –ø–æ—Ä—Ü–∏–∏. –ù–∞–ø—Ä–∏–º–µ—Ä, 0.25 –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ —Ç–æ–≤–∞—Ä –ø—Ä–æ–¥–∞—ë—Ç—Å—è –ø–æ 0.25 —à—Ç. –ü—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ 0.5 —à—Ç —Å –∫–æ—ç—Ñ. 0.25 –≤ QR –ø–æ–π–¥—ë—Ç 2 –ø–æ—Ä—Ü–∏–∏.">‚ìò</span>
                    </label>
                    <select id="gs1MeasureDivPreset" style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
                        <option value="1">–û–±—ã—á–Ω—ã–π —Ç–æ–≤–∞—Ä (1.0)</option>
                        <option value="0.5">–ü–æ–ª–æ–≤–∏–Ω–∫–∏ (0.5)</option>
                        <option value="0.25">–ß–µ—Ç–≤–µ—Ä—Ç–∏–Ω–∫–∏ (0.25)</option>
                        <option value="0.2">–ü–æ 200–≥ (0.2)</option>
                        <option value="0.1">–ü–æ 100–≥ (0.1)</option>
                        <option value="custom">–î—Ä—É–≥–æ–µ...</option>
                    </select>
                    <input type="number" id="gs1MeasureDiv" value="1" step="0.01" min="0.01" 
                           style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px; margin-top: 8px; display: none;">
                    <div class="hint" style="margin-top: 5px; font-size: 0.8em; color: #666;">
                        üí° –ü—Ä–∏ –∫–æ—ç—Ñ. 0.25: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ 0.5 —à—Ç ‚Üí 2 –ø–æ—Ä—Ü–∏–∏ –≤ QR (–∫–∞—Å—Å–∞: 2√ó0.25=0.5 —à—Ç)
                    </div>
                </div>
            </div>

            <!-- –°–µ–∫—Ü–∏—è –¥–ª—è –≤–µ—Å–æ–≤–æ–≥–æ —Ç–æ–≤–∞—Ä–∞ -->
            <div id="gs1-weight-section" class="d-none">
                <label style="font-weight:700;margin-bottom:15px">–í–µ—Å —Ç–æ–≤–∞—Ä–∞:</label>
                <div class="weight-mode-switch">
                    <input type="radio" name="gs1WeightMode" id="gs1WeightRandom" value="random" checked><label class="weight-mode-label" for="gs1WeightRandom">Random</label>
                    <input type="radio" name="gs1WeightMode" id="gs1WeightFixed" value="fixed"><label class="weight-mode-label" for="gs1WeightFixed">–§–∏–∫—Å.</label>
                </div>

                <div class="form-group" id="gs1-random-weight">
                    <label>–î–∏–∞–ø–∞–∑–æ–Ω –≤–µ—Å–∞ (–≥)</label>
                    <div class="weight-range-row">
                        <input type="number" id="gs1WeightMin" value="100">
                        <span>‚Äî</span>
                        <input type="number" id="gs1WeightMax" value="5000">
                    </div>
                </div>
                <div class="form-group d-none" id="gs1-fixed-weight">
                    <label>–§–∏–∫—Å. –≤–µ—Å (–≥)</label>
                    <input type="number" id="gs1FixedWeight" value="500">
                </div>
            </div>

            <hr class="weight-divider">

            <label style="font-weight:700;margin-bottom:15px">–°–∫–∏–¥–∫–∞:</label>
            <div class="weight-mode-switch">
                <input type="radio" name="gs1DiscountMode" id="gs1DiscFixed" value="fixed" checked><label class="weight-mode-label" for="gs1DiscFixed">–§–∏–∫—Å.</label>
                <input type="radio" name="gs1DiscountMode" id="gs1DiscRandom" value="random"><label class="weight-mode-label" for="gs1DiscRandom">Rand</label>
            </div>
            <div class="form-group" id="gs1-disc-fixed-group">
                <label>–†–∞–∑–º–µ—Ä —Å–∫–∏–¥–∫–∏</label>
                <div class="input-with-suffix"><input type="number" id="gs1Discount" value="10" min="0" max="99"><span class="suffix">%</span></div>
            </div>
            <div class="form-group d-none" id="gs1-disc-random-group">
                <label>–î–∏–∞–ø–∞–∑–æ–Ω —Å–∫–∏–¥–∫–∏</label>
                <div class="weight-range-row"><input type="number" id="gs1DiscMin" value="5"><span>‚Äî</span><input type="number" id="gs1DiscMax" value="30"></div>
            </div>

            <div class="form-group" style="margin-top:15px"><label>–í–∞—Ä–∏–∞—Ü–∏–π</label><input type="number" id="gs1Variations" value="10" min="1" max="100"><div class="hint">–ù–∞ –∫–∞–∂–¥—ã–π GoodsId</div></div>
            
            <div class="controls"><button class="btn btn-purple" id="gs1AddItems">–î–æ–±–∞–≤–∏—Ç—å</button></div>
        </div>
        <div class="bulk-actions">
            <span style="flex:1;font-size:.8em;color:var(--text-light)">–í –ø–∞–ø–∫–µ: <strong id="gs1-items-count">0</strong> <span id="gs1-current-folder-name"></span></span>
            <button class="btn btn-outline btn-sm" id="gs1-select-all">–í—Å–µ</button>
            <button class="btn btn-outline btn-sm" id="gs1-deselect-all">–°–Ω—è—Ç—å</button>
            <button class="btn btn-danger btn-sm" id="gs1-clear-selected">√ó</button>
        </div>
        <div class="weight-items-list" id="gs1ItemsList"></div>
        <div class="rotation-controls" id="gs1-rotation-controls">
            <div id="gs1-rotation-status">–°–æ–∑–¥–∞–π—Ç–µ –ø–∞–ø–∫—É</div>
            <div style="margin-top:10px;display:flex;justify-content:center;gap:10px">
                <button class="btn btn-success btn-sm" id="gs1-start-btn">–°—Ç–∞—Ä—Ç</button>
                <button class="btn btn-warning btn-sm" id="gs1-stop-btn" style="display:none">–°—Ç–æ–ø</button>
            </div>
        </div>
        <div class="gs1-carousel-display" id="gs1CarouselDisplay" style="display:none">
            <div id="gs1CodeInfo">-</div>
            <div id="gs1CodeText" style="font-size:.7em;word-break:break-all;color:var(--text-secondary);margin:5px 0 30px 0">-</div>
            <div class="gs1-qr-wrapper">
                <div id="gs1QRContainer"></div>
            </div>
            <div id="gs1CarouselCounter">1/1</div>
            <div class="gs1-carousel-nav">
                <button class="gs1-arrow-btn" id="gs1PrevBtn">‚ùÆ</button>
                <button class="gs1-arrow-btn" id="gs1NextBtn">‚ùØ</button>
            </div>
        </div>
        <div class="interval-selector">
            <button class="gs1-interval-btn" data-interval="0.5">0.5</button>
            <button class="gs1-interval-btn active" data-interval="0.7">0.7</button>
            <button class="gs1-interval-btn" data-interval="1">1</button>
            <button class="gs1-interval-btn" data-interval="2">2</button>
            <input type="number" id="gs1-custom-interval" class="custom-interval-input" step="0.1" min="0.1" value="0.7">
        </div>
    </div>
</div>
</div>

<!-- External Libraries -->
<script src="https://unpkg.com/bwip-js@3.0.4/dist/bwip-js-min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jsbarcode@3.11.5/dist/JsBarcode.all.min.js"></script>

<!-- Application Scripts (order matters!) -->
<script src="js/app/utils.js"></script>
<script src="js/app/config.js"></script>
<script src="js/app/state.js"></script>
<script src="js/app/storage.js"></script>
<script src="js/generators/generators.js"></script>
<script src="js/ui/ui.js"></script>
<script src="js/controllers/dm.controller.js?v=4"></script>
<script src="js/controllers/wc.controller.js"></script>
<script src="js/controllers/sg.controller.js"></script>
<script src="js/controllers/barcode.controller.js"></script>
<script src="js/controllers/tab.controller.js"></script>
<script src="js/controllers/library.controller.js"></script>
<script src="js/controllers/gs1.controller.js"></script>
<script src="js/main.js"></script>
</body>
</html>
